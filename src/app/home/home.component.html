<div class="main-container">
  <!-- TÃ­tulo de bienvenida con emojis de apuestas -->
  <h2 class="welcome-title">Bienvenido, {{ username }} ğŸ ğŸ°ğŸ’°</h2>

  <!-- Buscador -->
  <form class="search-form" (submit)="buscarApuestas(); $event.preventDefault()">
    <div class="input-wrapper">
      <input type="text" class="input search-input" placeholder="Buscar apuestas ğŸ”"
        [(ngModel)]="terminoBusqueda" name="busqueda" />
    </div>
    <div class="search-buttons">
      <button type="submit" class="submit-btn">Buscar ğŸ²</button>
      <button type="button" class="clear-btn" (click)="limpiarBusqueda()">Limpiar ğŸ’¸</button>
    </div>
  </form>

  <!-- Formulario de apuesta -->
  <form class="apuesta-form" (submit)="addApuesta(); $event.preventDefault()">
    <div class="input-wrapper">
      <input type="text" class="input" placeholder="Nombre de la apuesta ğŸ…" [(ngModel)]="apuestaNombre" name="nombre" />
    </div>
    <div class="input-wrapper">
      <input type="text" class="input" placeholder="DescripciÃ³n de la apuesta ğŸ¯" [(ngModel)]="apuestaDescripcion"
        name="descripcion" />
    </div>
    <div class="input-wrapper">
      <input type="text" class="input" placeholder="Link de la apuesta ğŸ”—" [(ngModel)]="apuestaLink" name="link" />
    </div>
    <button type="submit" class="submit-btn">Agregar apuesta ğŸ†</button>
  </form>

  <!-- Lista de apuestas -->
  <div class="apuesta-card" *ngFor="let a of apuestas">
    <div class="apuesta-info">
      <h3>{{ a.descripcion }} ğŸ°</h3>
      <p>Publicado por: {{ a.postedBy?.username || 'Desconocido' }}</p>
      <a [href]="a.link" target="_blank">Ver Apuesta ğŸ”—</a>
      <p *ngIf="a.reaccionMasVotada">
        ğŸŒŸ ReacciÃ³n mÃ¡s votada: <strong>{{ a.reaccionMasVotada }}</strong>
      </p>
    </div>

    <!-- âœ… Reacciones con emojis -->
    <div class="reactions">
      <button class="reaction-btn" (click)="reaccionar(a.id, 1)">
        <span role="img" aria-label="me gusta">â¤ï¸</span> Me gusta
      </button>
      <button class="reaction-btn" (click)="reaccionar(a.id, 2)">
        <span role="img" aria-label="no me gusta">ğŸ‘</span> No me gusta
      </button>
      <button class="reaction-btn" (click)="reaccionar(a.id, 3)">
        <span role="img" aria-label="odio">ğŸ˜¡</span> Odio
      </button>
    </div>

    <!-- Comentarios -->
    <div class="comentarios" *ngIf="a.comentarios?.length">
      <div *ngFor="let comentario of a.comentarios">
        <strong>{{ comentario.nombreUsuario }}:</strong> {{ comentario.contenido }}
      </div>
    </div>

    <!-- Agregar comentario -->
  <form class="comentario-form" (submit)="crearComentario(a); $event.preventDefault()">
  <div class="input-wrapper">
    <input type="text" [(ngModel)]="a.nuevoComentario" [name]="'comentario' + a.id" class="input comentario-input"
      placeholder="Escribe un comentario ğŸ¯..." />
  </div>
  <button type="submit">
    Comentar ğŸ“
  </button>
</form>

  </div>

  <!-- PaginaciÃ³n -->
  <div class="paginacion">
    <button (click)="paginaActual = paginaActual - 1; getApuestas()" [disabled]="paginaActual === 0">
      â¬…ï¸ Anterior
    </button>
    <span>PÃ¡gina {{ paginaActual + 1 }} de {{ totalPaginas }}</span>
    <button (click)="paginaActual = paginaActual + 1; getApuestas()" [disabled]="paginaActual + 1 >= totalPaginas">
      Siguiente â¡ï¸
    </button>
  </div>
</div>
